# NetworkPolicy: Allow Open WebUI External Egress
# Allows Open WebUI to download models from HuggingFace and other external sources
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-open-webui-external-egress
  namespace: ai-services
  annotations:
    policy.purpose: "Allow Open WebUI to download sentence-transformers models from HuggingFace"
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: open-webui
  policyTypes:
    - Egress
  egress:
    # Allow HTTPS to external services (HuggingFace model downloads)
    - ports:
        - port: 443
          protocol: TCP
      # Allow to any destination (internet egress)
      # Note: Can be restricted to specific CIDRs if needed
    # Allow HTTP to external services (fallback)
    - ports:
        - port: 80
          protocol: TCP
