replicaCount: 1
image:
  repository: quay.io/oauth2-proxy/oauth2-proxy
  tag: v7.7.1
  pullPolicy: IfNotPresent
config:
  provider: keycloak-oidc
  providerDisplayName: VectorWeight SSO
  oidcIssuerUrl: https://auth.vectorweight.com/realms/vectorweight
  cookieName: _oauth2_proxy
  cookieSecure: true
  cookieDomains:
  - .vectorweight.com
  emailDomains:
  - '*'
  sslInsecureSkipVerify: false
  upstream: http://landing-page.default.svc.cluster.local:80/
  passBasicAuth: false
  passAccessToken: true
  setXAuthRequest: true
  setAuthorizationHeader: true
  cookieSecret: b0/RvgHti3L6BkUSMSuuAbcPWDzuo1KG
secretEnv:
  OAUTH2_PROXY_CLIENT_ID:
    secretName: n8n-oidc-secret
    key: client-id
  OAUTH2_PROXY_CLIENT_SECRET:
    secretName: n8n-oidc-secret
    key: client-secret
service:
  type: ClusterIP
  port: 4180
protectedServices:
- name: n8n
- name: searxng
- name: litellm
- name: traefik-dashboard
- name: dify
- name: prometheus
- name: longhorn
- name: openobserve
- name: jaeger
- name: landing-page
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi
nodeSelector:
  kubernetes.io/hostname: homelab
tolerations: []
affinity: {}
extraVolumes:
- name: ca-bundle
  secret:
    secretName: vectorweight-root-ca
    defaultMode: 420
extraVolumeMounts:
- name: ca-bundle
  mountPath: /etc/ssl/certs/vectorweight-ca.crt
  subPath: tls.crt
  readOnly: true
extraEnv:
- name: SSL_CERT_FILE
  value: /etc/ssl/certs/vectorweight-ca.crt
